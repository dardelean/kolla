---
- name: Test temporary download directory
  win_stat: path="{{temp_dir}}"
  register: stat_temp_dir

- name: Test log directory
  win_stat: path="{{log_dir}}"
  register: stat_log_dir

- name: Create temporary download directory
  win_command: "cmd /c mkdir {{temp_dir}}"
  when: not stat_temp_dir.stat.exists

- name: Create log directory
  win_command: "cmd /c mkdir {{log_dir}}"
  when: not stat_log_dir.stat.exists

- name: Download the Nova MSI
  win_get_url:
    url: "{{ base_download_url }}/{{ hyperv_compute_msi }}"
    dest: "{{ temp_dir }}\\{{ hyperv_compute_msi }}"

- name: Download the FreeRDP-WebConnect MSI
  win_get_url:
    url: "{{ base_download_url }}/{{ freerdp_webconnect_msi }}"
    dest: "{{ temp_dir }}\\{{ freerdp_webconnect_msi }}"
